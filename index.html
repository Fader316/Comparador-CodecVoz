<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <!-- VITAL: Esto fuerza al mÃ³vil a mostrarse a tamaÃ±o real y no permitir zoom accidental -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Comparador de TÃ©cnicas de Codificador de Voz</title>
    
    <!-- Enlace al CSS -->
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <!-- VISTA DASHBOARD -->
    <div class="view-container">
        
        <!-- TÃTULO PRINCIPAL -->
        <header class="app-header">
            <h1>Comparador de TÃ©cnicas de Codificador de Voz</h1>
        </header>

        <!-- 1. SELECTOR DE CODEC -->
        <nav class="top-nav">
            <label class="codec-btn selected" id="btn-lpc" style="--active-color: #0d9488;" onclick="selectCodec('lpc')">
                <svg class="icon-svg" viewBox="0 0 24 24"><path d="M12,2A2,2 0 0,1 14,4C14,4.74 13.6,5.39 13,5.73V7H14A7,7 0 0,1 21,14H22A1,1 0 0,1 23,15V18A1,1 0 0,1 22,19H21V20A2,2 0 0,1 19,22H5A2,2 0 0,1 3,20V19H2A1,1 0 0,1 1,18V15A1,1 0 0,1 2,14H3A7,7 0 0,1 10,7H11V5.73C10.4,5.39 10,4.74 10,4A2,2 0 0,1 12,2M7.5,13A2.5,2.5 0 0,0 5,15.5A2.5,2.5 0 0,0 7.5,18A2.5,2.5 0 0,0 10,15.5A2.5,2.5 0 0,0 7.5,13M16.5,13A2.5,2.5 0 0,0 14,15.5A2.5,2.5 0 0,0 16.5,18A2.5,2.5 0 0,0 19,15.5A2.5,2.5 0 0,0 16.5,13Z" /></svg>
                <span class="codec-name">LPC</span>
            </label>
            <label class="codec-btn" id="btn-relp" style="--active-color: #d97706;" onclick="selectCodec('relp')">
                <svg class="icon-svg" viewBox="0 0 24 24"><path d="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4M12,6A6,6 0 0,0 6,12A6,6 0 0,0 12,18A6,6 0 0,0 18,12A6,6 0 0,0 12,6M12,8A4,4 0 0,1 16,12A4,4 0 0,1 12,16A4,4 0 0,1 8,12A4,4 0 0,1 12,8Z" /></svg>
                <span class="codec-name">RELP</span>
            </label>
            <label class="codec-btn" id="btn-celp" style="--active-color: #059669;" onclick="selectCodec('celp')">
                <svg class="icon-svg" viewBox="0 0 24 24"><path d="M17,1.01L7,1C5.9,1 5,1.9 5,3V21C5,22.1 5.9,23 7,23H17C18.1,23 19,22.1 19,21V3C19,1.9 18.1,1.01 17,1.01M17,19H7V5H17V19M16,13H8V15H16V13Z" /></svg>
                <span class="codec-name">CELP</span>
            </label>
        </nav>

        <!-- 2. MÃ‰TRICAS -->
        <div class="metrics-bar" id="mainMetrics">
            <div class="metric-mini">
                <div class="metric-val" id="m-bitrate">2.4</div>
                <div class="metric-lbl">Kbps</div>
            </div>
            <div class="metric-mini">
                <div class="metric-val" id="m-mos">3.0</div>
                <div class="metric-lbl">MOS</div>
            </div>
            <div class="metric-mini">
                <div class="metric-val" id="m-delay">35</div>
                <div class="metric-lbl">Delay</div>
            </div>
            <div class="metric-mini">
                <div class="metric-val" id="m-cpu">Baja</div>
                <div class="metric-lbl">CPU</div>
            </div>
        </div>

        <!-- 3. OSCILOSCOPIO -->
        <main class="main-stage">
            <div class="canvas-box">
                <canvas id="oscCanvas"></canvas>
                <div class="status-badge" id="statusText">LPC_READY</div>
            </div>
        </main>

        <!-- 4. BOTÃ“N FLOTANTE -->
        <div class="fab-container">
            <button id="mainToggleBtn" class="main-action-btn btn-start" onclick="toggleSim()">
                â–¶ INICIAR
            </button>
        </div>

        <!-- 5. BOTONES AUXILIARES -->
        <div class="aux-controls">
            <div class="aux-btn" onclick="openModal('modal-theory')">
                ðŸ“˜ <span class="tooltip">Ver TeorÃ­a</span>
            </div>
            <div class="aux-btn" onclick="openModal('modal-compare')">
                ðŸ“Š <span class="tooltip">Comparar Tabla</span>
            </div>
            <div class="aux-btn" onclick="startGame()">
                ðŸŽ® <span class="tooltip">DesafÃ­o RÃ¡pido</span>
            </div>
        </div>
    </div>

    <!-- MODAL TEORÃA -->
    <div id="modal-theory" class="modal-overlay">
        <div class="modal-content">
            <button class="close-btn" onclick="closeAllModals()">&times;</button>
            <h2 id="theoryTitle" style="color:var(--active-color); margin-bottom:1rem;">TeorÃ­a</h2>
            <div id="theoryText" style="line-height:1.6; color:#cbd5e1;"></div>
            <div style="margin-top:1rem;">
                <span id="theoryTag" style="background:var(--active-color); color:#000; padding:4px 12px; border-radius:12px; font-weight:bold;"></span>
            </div>
        </div>
    </div>

    <!-- MODAL COMPARACIÃ“N -->
    <div id="modal-compare" class="modal-overlay">
        <div class="modal-content">
            <button class="close-btn" onclick="closeAllModals()">&times;</button>
            <h2 style="text-align:center; margin-bottom:1.5rem;">Comparativa TÃ©cnica</h2>
            <table class="comparison-table">
                <thead>
                    <tr>
                        <th>Aspecto</th>
                        <th style="color:var(--color-lpc)">LPC</th>
                        <th style="color:var(--color-relp)">RELP</th>
                        <th style="color:var(--color-celp)">CELP</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>Calidad de Voz</strong></td>
                        <td>Baja (RobÃ³tica)</td>
                        <td>Media</td>
                        <td>Alta (Natural)</td>
                    </tr>
                    <tr>
                        <td><strong>Tasa de Bits</strong></td>
                        <td>Muy Baja (2.4 kbps)</td>
                        <td>Media (9.6 kbps)</td>
                        <td>Variable (4-16 kbps)</td>
                    </tr>
                    <tr>
                        <td><strong>Complejidad CPU</strong></td>
                        <td>Baja (FÃ¡cil)</td>
                        <td>Media</td>
                        <td>Alta (Intensiva)</td>
                    </tr>
                    <tr>
                        <td><strong>Latencia</strong></td>
                        <td>Alta (35ms)</td>
                        <td>Media (25ms)</td>
                        <td>Baja (20ms)</td>
                    </tr>
                    <tr>
                        <td><strong>Uso Principal</strong></td>
                        <td>Militar / Seguridad</td>
                        <td>SatÃ©lites Antiguos</td>
                        <td>VoIP / MÃ³viles (4G/5G)</td>
                    </tr>
                    <tr>
                        <td><strong>Ventaja Clave</strong></td>
                        <td>MÃ­nimo ancho banda</td>
                        <td>Mejor tono que LPC</td>
                        <td>Calidad casi perfecta</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- MODAL JUEGO -->
    <div id="modal-game" class="modal-overlay">
        <div class="modal-content game-area">
            <button class="close-btn" onclick="closeAllModals()">&times;</button>
            <h2>ðŸŽ® DesafÃ­o RÃ¡pido</h2>
            <div class="game-score">Puntos: <span id="scoreVal">0</span></div>
            
            <div class="game-scenario" id="gameScenario">
                Cargando escenario...
            </div>
            
            <div class="game-options">
                <div class="game-card pos-tl" id="card-lpc" onclick="checkAnswer('lpc')">
                    <svg viewBox="0 0 24 24"><path d="M12,2A2,2 0 0,1 14,4C14,4.74 13.6,5.39 13,5.73V7H14A7,7 0 0,1 21,14H22A1,1 0 0,1 23,15V18A1,1 0 0,1 22,19H21V20A2,2 0 0,1 19,22H5A2,2 0 0,1 3,20V19H2A1,1 0 0,1 1,18V15A1,1 0 0,1 2,14H3A7,7 0 0,1 10,7H11V5.73C10.4,5.39 10,4.74 10,4A2,2 0 0,1 12,2M7.5,13A2.5,2.5 0 0,0 5,15.5A2.5,2.5 0 0,0 7.5,18A2.5,2.5 0 0,0 10,15.5A2.5,2.5 0 0,0 7.5,13M16.5,13A2.5,2.5 0 0,0 14,15.5A2.5,2.5 0 0,0 16.5,18A2.5,2.5 0 0,0 19,15.5A2.5,2.5 0 0,0 16.5,13Z" /></svg>
                    <h3>LPC</h3>
                </div>
                <div class="game-card pos-tr" id="card-celp" onclick="checkAnswer('celp')">
                    <svg viewBox="0 0 24 24"><path d="M17,1.01L7,1C5.9,1 5,1.9 5,3V21C5,22.1 5.9,23 7,23H17C18.1,23 19,22.1 19,21V3C19,1.9 18.1,1.01 17,1.01M17,19H7V5H17V19M16,13H8V15H16V13Z" /></svg>
                    <h3>CELP</h3>
                </div>
                <div class="game-card pos-bc" id="card-relp" onclick="checkAnswer('relp')">
                    <svg viewBox="0 0 24 24"><path d="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4M12,6A6,6 0 0,0 6,12A6,6 0 0,0 12,18A6,6 0 0,0 18,12A6,6 0 0,0 12,6M12,8A4,4 0 0,1 16,12A4,4 0 0,1 12,16A4,4 0 0,1 8,12A4,4 0 0,1 12,8Z" /></svg>
                    <h3>RELP</h3>
                </div>
            </div>

            <div class="game-feedback" id="gameFeedback"></div>
        </div>
    </div>

    <!-- Script al final para asegurar carga correcta -->
    <script src="script.js"></script>
</body>
</html>